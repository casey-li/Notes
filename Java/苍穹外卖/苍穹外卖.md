
苍穹外卖项目以后端为主，前端仅粗略讲述

# 后端

## 项目整体介绍

![](imgs/3_软件开发整体介绍.jpg)

![](imgs/3_软件开发整体介绍2.jpg)

![](imgs/4_项目模块.jpg)

![](imgs/4_技术选型.jpg)

![](imgs/5_整体架构.jpg)

![](imgs/6_后端架构.jpg)

![](imgs/6_模块介绍.jpg)

![](imgs/6_模块介绍2.jpg)

## 开发环境搭建

- 后端环境搭建

![](imgs/8_后端环境搭建_数据库.jpg)

![](imgs/9_后端环境搭建_前后端联调.jpg)

![](imgs/10_后端环境搭建_前段请求如何请求到后端.jpg)

![](imgs/10_后端环境搭建_nginx反向代理的好处.jpg)

![](imgs/11_后端环境搭建_nginx反向代理配置.jpg)

![](imgs/11_后端环境搭建_nginx负载均衡配置.jpg)

![](imgs/11_后端环境搭建_nginx负载均衡策略.jpg)

- 完善登陆功能

![](imgs/12_完善登陆功能_存在问题.jpg)

![](imgs/12_完善登陆功能_步骤.jpg)

## Swagger

![](imgs/14_Swagger介绍.jpg)

![](imgs/14_Swagger使用步骤.jpg)

1. 导入 knife4j 的maven坐标

```xml
<!--在pom.xml中添加依赖 -->
<dependency>
    <groupId>com.github.xiaoymin</groupId>
    <artifactId>knife4j-spring-boot-starter</artifactId>
</dependency>
```

2. 在配置类中加入 knife4j 相关配置

```java
// WebMvcConfiguration.java

/**
    * 通过knife4j生成接口文档
    * @return
*/
    @Bean
    public Docket docket() {
        ApiInfo apiInfo = new ApiInfoBuilder()
                .title("苍穹外卖项目接口文档")
                .version("2.0")
                .description("苍穹外卖项目接口文档")
                .build();
        Docket docket = new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(apiInfo)
                .select()
                .apis(RequestHandlerSelectors.basePackage("com.sky.controller"))
                .paths(PathSelectors.any())
                .build();
        return docket;
    }
```

3. 设置静态资源映射，否则接口文档页面无法访问

```java
// WebMvcConfiguration.java
/**
    * 设置静态资源映射
    * @param registry
*/
protected void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/doc.html").addResourceLocations("classpath:/META-INF/resources/");
        registry.addResourceHandler("/webjars/**").addResourceLocations("classpath:/META-INF/resources/webjars/");
}
```

![](imgs/14_Swagger和Yapi的区别.jpg)

![](imgs/15_Swagger常用注解.jpg)


## 员工管理、分类管理

- 新增员工

![](imgs/16_新增员工_需求分析和设计.jpg)

![](imgs/16_新增员工_需求分析和设计2.jpg)

![](imgs/16_新增员工_需求分析和设计3.jpg)

![](imgs/17_新增员工_代码开发.jpg)

![](imgs/18_新增员工_功能测试.jpg)

![](imgs/19_新增员工_代码完善.jpg)

![](imgs/20_新增员工_代码完善2.jpg)

![](imgs/20_新增员工_代码完善3.jpg)

![](imgs/20_新增员工_代码完善4.jpg)

![](imgs/20_新增员工_代码完善5.png)


- 员工分页查询

![](imgs/21_员工分页查询_需求分析和设计.jpg)

![](imgs/21_员工分页查询_需求分析和设计2.jpg)

![](imgs/22_员工分页查询_代码开发.jpg)

![](imgs/22_员工分页查询_代码开发2.jpg)

日期显示存在问题

![](imgs/24_员工分页查询_代码完善.jpg)

- 启用禁用员工账号

![](imgs/25_启用禁用员工账号_需求分析和设计.jpg)

![](imgs/25_启用禁用员工账号_需求分析和设计2.jpg)

- 编辑员工

![](imgs/27_编辑员工_需求分析和设计.jpg)

![](imgs/27_编辑员工_需求分析和设计2.jpg)

- 分类管理模块

基本同员工管理模块

![](imgs/30_分类管理模块_需求分析和设计.jpg)

![](imgs/30_分类管理模块_需求分析和设计2.jpg)

![](imgs/30_分类管理模块_需求分析和设计3.jpg)

![](imgs/30_分类管理模块_需求分析和设计4.jpg)

## 菜品管理

- 公共字段填充

![](imgs/31_公共字段填充_问题分析.jpg)

![](imgs/31_公共字段填充_实现思路.jpg)

- 新增菜品

![](imgs/35_新增菜品_需求分析和设计.jpg)

![](imgs/35_新增菜品_需求分析和设计2.jpg)

![](imgs/35_新增菜品_需求分析和设计3.jpg)

![](imgs/35_新增菜品_需求分析和设计4.jpg)

![](imgs/35_新增菜品_需求分析和设计5.jpg)

![](imgs/36_新增菜品_文件上传思路.jpg)

- 菜品分页查询

![](imgs/40_菜品分页查询_需求分析和设计.jpg)

![](imgs/40_菜品分页查询_需求分析和设计2.jpg)

![](imgs/41_菜品分页查询_代码开发.jpg)

![](imgs/41_菜品分页查询_代码开发2.jpg)

- 删除菜品

![](imgs/42_删除菜品_需求分析和设计.jpg)

![](imgs/42_删除菜品_需求分析和设计2.jpg)

![](imgs/42_删除菜品_需求分析和设计3.jpg)

- 修改菜品

![](imgs/45_修改菜品_需求分析和设计.jpg)

![](imgs/45_修改菜品_需求分析和设计2.jpg)

![](imgs/45_修改菜品_需求分析和设计3.jpg)

## 套餐管理

同菜品管理，包含新增套餐、套餐分页查询、删除套餐、修改套餐和起售停售套餐五大业务，自己实现

## 店铺营业状态设置

- Redis入门

![](imgs/50_redis入门.jpg)

![](imgs/50_redis入门2.jpg)

- Redis数据类型

![](imgs/51_redis常用数据类型.jpg)

![](imgs/51_redis常用数据类型特点.jpg)

- Redis常用命令

1. 字符串操作命令

![](imgs/52_redis常用命令_字符串操作命令.jpg)

2. 哈希操作命令

![](imgs/53_redis常用命令_哈希操作命令.jpg)

3. 列表操作命令

![](imgs/54_redis常用命令_列表操作命令.jpg)

4. 集合操作命令

![](imgs/55_redis常用命令_集合操作命令.jpg)

5. 有序集合操作命令

![](imgs/56_redis常用命令_有序集合操作命令.jpg)

6. 通用命令

![](imgs/57_redis常用命令_通用命令.jpg)

- 在Java中操作Redis

![](imgs/58_在Java中操作redis_常用客户端.jpg)

![](imgs/58_在Java中操作redis_Spring%20Data%20Redis使用方式.jpg)

- 店铺营业状态设置

![](imgs/63_店铺营业状态设置_需求分析和设计.jpg)

![](imgs/63_店铺营业状态设置_需求分析和设计2.jpg)

![](imgs/63_店铺营业状态设置_需求分析和设计3.jpg)

![](imgs/63_店铺营业状态设置_需求分析和设计4.jpg)

## 微信登录、商品浏览

- Http Client

![](imgs/67_HttpClient_介绍.jpg)

```java
// 使用案例
public void testGET() throws Exception{
    //1.创建httpclient对象
    CloseableHttpClient httpClient = HttpClients.createDefault();
    
    //2.创建请求对象
    HttpGet httpGet = new HttpGet("http://localhost:8080/user/shop/status");

    //3.发送请求，接受响应结果
    CloseableHttpResponse response = httpClient.execute(httpGet);

    //4.获取服务端返回的状态码
    int statusCode = response.getStatusLine().getStatusCode();
    System.out.println("服务端返回的状态码为：" + statusCode);

    HttpEntity entity = response.getEntity();
    String body = EntityUtils.toString(entity);
    System.out.println("服务端返回的数据为：" + body);

    //5.关闭资源
    response.close();
    httpClient.close();
}

public void testPOST() throws Exception{
    //1.创建httpclient对象
    CloseableHttpClient httpClient = HttpClients.createDefault();

    //2.创建请求对象
    HttpPost httpPost = new HttpPost("http://localhost:8080/admin/employee/login");
    //2.1设置请求体
    JSONObject jsonObject = new JSONObject();
    jsonObject.put("username","admin");
    jsonObject.put("password","123456");

    StringEntity entity = new StringEntity(jsonObject.toString());
    //2.2指定请求编码方式
    entity.setContentEncoding("utf-8");
    //2.3数据格式
    entity.setContentType("application/json");
    httpPost.setEntity(entity);

    //3.发送请求
    CloseableHttpResponse response = httpClient.execute(httpPost);

    //4.解析返回结果
    int statusCode = response.getStatusLine().getStatusCode();
    System.out.println("响应码为：" + statusCode);
    HttpEntity entity1 = response.getEntity();
    String body = EntityUtils.toString(entity1);
    System.out.println("响应数据为：" + body);

    //5.关闭资源
    response.close();
    httpClient.close();
}
```

- 微信小程序开发

![](imgs/70_微信小程序开发_介绍.jpg)

![](imgs/72_微信小程序开发_入门案例_目录结构.jpg)

![](imgs/72_微信小程序开发_入门案例_目录结构2.jpg)

- 微信登录

![](imgs/78_微信登录流程.jpg)

[微信登录官方说明文档](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html)

**步骤分析：**

1. 小程序端，调用wx.login()获取code，就是授权码。
2. 小程序端，调用wx.request()发送请求并携带code，请求开发者服务器(自己编写的后端服务)。
3. 开发者服务端，通过HttpClient向微信接口服务发送请求，并携带appId+appsecret+code三个参数。
4. 开发者服务端，接收微信接口服务返回的数据，session_key+opendId等。opendId是微信用户的唯一标识。
5. 开发者服务端，自定义登录态，生成令牌(token)和openid等数据返回给小程序端，方便后绪请求身份校验。
6. 小程序端，收到自定义登录态，存储storage。
7. 小程序端，后绪通过wx.request()发起业务请求时，携带token。
8. 开发者服务端，收到请求后，通过携带的token，解析当前登录用户的id。
9. 开发者服务端，身份校验通过后，继续相关的业务逻辑处理，最终返回业务数据。

![](imgs/79_微信登录_需求分析和设计.jpg)

![](imgs/79_微信登录_需求分析和设计2.jpg)

![](imgs/79_微信登录_需求分析和设计3.jpg)

- 导入商品浏览功能代码

![](imgs/84_商品浏览功能_需求分析和设计.jpg)

![](imgs/84_商品浏览功能_需求分析和设计2.jpg)

![](imgs/84_商品浏览功能_需求分析和设计3.jpg)

![](imgs/84_商品浏览功能_需求分析和设计4.jpg)

![](imgs/84_商品浏览功能_需求分析和设计5.jpg)

![](imgs/84_商品浏览功能_需求分析和设计6.jpg)

## 缓存和购物车

- 缓存菜品

![](imgs/87_缓存菜品_问题说明.jpg)

![](imgs/87_缓存菜品_实现思路.jpg)

![](imgs/87_缓存菜品_实现思路2.jpg)

![](imgs/89_缓存菜品_清理缓存数据.jpg)

- 缓存套餐

使用Spring Cache缓存框架可以简化操作

![](imgs/91_缓存套餐_SpringCache介绍.jpg)

![](imgs/91_缓存套餐_SpringCache常用注解.jpg)

![](imgs/96_缓存套餐_实现思路.jpg)

- 添加购物车

![](imgs/98_添加购物车_需求分析和设计.jpg)

![](imgs/98_添加购物车_需求分析和设计2.jpg)

![](imgs/98_添加购物车_需求分析和设计3.jpg)

没有取消冗余字段是为了提高速度，否则添加购物车的时候还需要去查菜品表或套餐表来获取名称、单价等信息

- 查看购物车

![](imgs/103_查看购物车_需求分析和设计.jpg)

- 清空购物车

![](imgs/104_清空购物车_需求分析和设计.jpg)

## 用户下单、订单支付

- 导入地址薄功能代码（就是单表的增删改查）

![](imgs/106_地址簿模块_需求分析和设计.jpg)

![](imgs/106_地址簿模块_需求分析和设计2.jpg)

![](imgs/106_地址簿模块_新增地址.jpg)

![](imgs/106_地址簿模块_查询登录用户所有地址.jpg)

![](imgs/106_地址簿模块_查询默认地址.jpg)

![](imgs/106_地址簿模块_修改地址.jpg)

![](imgs/106_地址簿模块_根据id删除地址.jpg)

![](imgs/106_地址簿模块_根据id查询地址.jpg)

![](imgs/106_地址簿模块_设置默认地址.jpg)

![](imgs/106_地址簿模块_需求分析和设计3.jpg)

- 用户下单

![](imgs/109_用户下单_需求分析和设计.jpg)

![](imgs/109_用户下单_需求分析和设计2.jpg)

![](imgs/109_用户下单_需求分析和设计3.jpg)

![](imgs/109_用户下单_需求分析和设计4.jpg)

![](imgs/109_用户下单_需求分析和设计5.jpg)

![](imgs/110_用户下单_数据库设计.jpg)

![](imgs/110_用户下单_数据库设计2.jpg)

![](imgs/110_用户下单_数据库设计3.jpg)

![](imgs/111_用户下单_代码开发1.jpg)

![](imgs/111_用户下单_代码开发2.jpg)

- 订单支付

了解微信支付的流程即可，因为需要正规的企业运营执照才能注册微信支付的商户号，进而开通支付权限

![](imgs/116_订单支付_微信支付介绍.jpg)

![](imgs/116_订单支付_微信支付介绍2.jpg)

![](imgs/117_订单支付_微信支付时序图.jpg)

![](imgs/118_订单支付_微信支付接口.jpg)

![](imgs/118_订单支付_微信支付接口2.jpg)

![](imgs/119_订单支付_微信支付准备工作.jpg)

![](imgs/119_订单支付_微信支付准备工作2.jpg)

需要注册微信支付的商户号才能下载证书和私钥文件

![](imgs/119_订单支付_微信支付准备工作3.jpg)

就是为了获取一个临时的公网IP

![](imgs/120_订单支付_微信支付代码导入.jpg)

导入代码后修改 `OrderController` 中的 `payment` 方法，在调用 `OrderService` 的 `payment` 方法时跳过调用微信的订单支付接口，然后直接在`OrderController` 中的 `payment` 方法中继续调用 `OrderService` 的 `paySuccess` 方法完成微信支付进行模拟

## 用户端历史订单模块和商家端订单管理模块

这两个模块为作业

用户端历史订单模块：
- 查询历史订单
- 查询订单详情
- 取消订单
- 再来一单

商家端订单管理模块：
- 订单搜索
- 各个状态的订单数量统计
- 查询订单详情
- 接单
- 拒单
- 取消订单
- 派送订单
- 完成订单

## 订单状态定时处理、来单提醒和客户催单

- 订单状态定时处理

![](imgs/123_SpringTask介绍.jpg)

![](imgs/123_SpringTask介绍2.jpg)

![](imgs/123_SpringTask介绍3.jpg)

![](imgs/124_SpringTask_cron表达式.jpg)

![](imgs/124_SpringTask_cron表达式2.jpg)

![](imgs/125_SpringTask使用.jpg)

![](imgs/126_订单状态定时处理_需求分析.jpg)

- 来单提醒 

![](imgs/129_WebSocket介绍.jpg)

![](imgs/129_WebSocket介绍2.jpg)

![](imgs/130_WebSocket入门案例.jpg)

![](imgs/132_来单提醒_需求分析和设计.jpg)

![](imgs/132_来单提醒_需求分析和设计2.jpg)

- 客户催单

![](imgs/135_客户催单_需求分析和设计.jpg)

![](imgs/135_客户催单_需求分析和设计2.jpg)

![](imgs/135_客户催单_需求分析和设计3.jpg)

## 数据统计、图形报表

- Apache ECharts

![](imgs/138_ApacheECharts介绍.jpg)

![](imgs/138_ApacheECharts介绍2.jpg)

- 营业额统计

![](imgs/140_营业额统计_需求分析和设计.jpg)

![](imgs/140_营业额统计_需求分析和设计2.jpg)

![](imgs/141_营业额统计_代码开发.jpg)

- 用户统计

![](imgs/146_用户统计_需求分析和设计.jpg)

![](imgs/146_用户统计_需求分析和设计2.jpg)

![](imgs/146_用户统计_需求分析和设计3.jpg)

- 订单统计

![](imgs/151_订单统计_需求分析和设计.jpg)

![](imgs/151_订单统计_需求分析和设计2.jpg)

![](imgs/152_订单统计_需求分析和设计3.jpg)

- 销量排名Top10

![](imgs/155_销量排名统计_需求分析和设计.jpg)

![](imgs/155_销量排名统计_需求分析和设计2.jpg)

![](imgs/156_销量排名统计_需求分析和设计3.jpg)

## 数据统计-Excel报表

- 工作台

![](imgs/160_工作台_需求分析和设计.jpg)

![](imgs/160_工作台_需求分析和设计2.jpg)

![](imgs/160_工作台_需求分析和设计3.jpg)

![](imgs/160_工作台_需求分析和设计4.jpg)

![](imgs/160_工作台_需求分析和设计5.jpg)

![](imgs/160_工作台_需求分析和设计6.jpg)

![](imgs/160_工作台_需求分析和设计7.jpg)

- Apache POI

![](imgs/163_Apache%20POI介绍.jpg)

![](imgs/163_Apache%20POI介绍2.jpg)

![](imgs/164_Apache%20POI入门案例1.jpg)

- 导出运营数据Excel报表

![](imgs/166_导出运营数据Excel报表_需求分析和设计.jpg)

![](imgs/166_导出运营数据Excel报表_需求分析和设计2.jpg)

![](imgs/167_导出运营数据Excel报表_代码开发.jpg)

# 前端

## 基于脚手架创建前端工程

![](imgs/172_VUE基础回顾_基于脚手架创建前端工程.jpg)

![](imgs/172_VUE基础回顾_基于脚手架创建前端工程2.jpg)

![](imgs/172_VUE基础回顾_基于脚手架创建前端工程3.jpg)

![](imgs/172_VUE基础回顾_基于脚手架创建前端工程4.jpg)

![](imgs/172_VUE基础回顾_基于脚手架创建前端工程5.jpg)

![](imgs/172_VUE基础回顾_基于脚手架创建前端工程总结.jpg)

## vue基本使用方式

- 基本语法

![](imgs/173_VUE基础回顾_VUE基本使用方式_vue组件.jpg)

![](imgs/173_VUE基础回顾_VUE基本使用方式_文本插值.jpg)

![](imgs/173_VUE基础回顾_VUE基本使用方式_属性绑定.jpg)

![](imgs/173_VUE基础回顾_VUE基本使用方式_事件绑定.jpg)

![](imgs/173_VUE基础回顾_VUE基本使用方式_双向绑定.jpg)

![](imgs/173_VUE基础回顾_VUE基本使用方式_条件渲染.jpg)

- axios

![](imgs/174_VUE基础回顾_VUE基本使用方式_axios.jpg)

![](imgs/174_VUE基础回顾_VUE基本使用方式_axios2.jpg)

![](imgs/174_VUE基础回顾_VUE基本使用方式_axios3.jpg)

![](imgs/174_VUE基础回顾_VUE基本使用方式_axios4.jpg)

![](imgs/174_VUE基础回顾_VUE基本使用方式_axios5.jpg)

![](imgs/174_VUE基础回顾_总结.jpg)

## 路由 Vue-Router

![](imgs/175_路由Vue-Router_介绍.jpg)

![](imgs/175_路由Vue-Router_介绍小结.jpg)

- 路由配置

![](imgs/175_路由Vue-Router_路由配置.jpg)

![](imgs/175_路由Vue-Router_路由配置2.jpg)

![](imgs/175_路由Vue-Router_路由配置3.jpg)

![](imgs/175_路由Vue-Router_路由配置4.jpg)

![](imgs/175_路由Vue-Router_路由配置小结.jpg)

- 嵌套路由

![](imgs/176_路由Vue-Router_嵌套路由.jpg)

![](imgs/176_路由Vue-Router_嵌套路由2.jpg)

![](imgs/176_路由Vue-Router_嵌套路由3.jpg)

## 状态管理 Vuex

![](imgs/177_状态管理vuex_介绍.jpg)

![](imgs/177_状态管理vuex_介绍2.jpg)

![](imgs/177_状态管理vuex_使用方式.jpg)

![](imgs/177_状态管理vuex_使用方式2.jpg)

![](imgs/178_状态管理vuex_使用方式3.jpg)

![](imgs/178_状态管理vuex_小结.jpg)

## TypeScript介绍

![](imgs/179_TypeScript_介绍.jpg)

![](imgs/179_TypeScript_介绍2.jpg)

![](imgs/179_TypeScript_介绍3.jpg)

![](imgs/179_TypeScript_介绍4.jpg)

![](imgs/179_TypeScript_介绍小结.jpg)

![](imgs/179_TypeScript_常用类型.jpg)

![](imgs/179_TypeScript_常用类型2.jpg)

![](imgs/179_TypeScript_常用类型_字面量类型.jpg)

![](imgs/180_TypeScript_常用类型_interface.jpg)

![](imgs/180_TypeScript_常用类型_class.jpg)

![](imgs/180_TypeScript_常用类型_实现接口.jpg)

![](imgs/180_TypeScript_常用类型_类的继承.jpg)

![](imgs/180_TypeScript_常用类型_小结.jpg)

## 苍穹外卖前端项目环境搭建

技术选型：
- node.js：基础环境（类似开发java程序需要jdk）
- vue：前端框架
- ElementUI：组件库（表格、菜单、下拉框...）
- axios：前后端交互需要发送ajax异步请求
- vuex ：状态管理，实现多个组件之间的数据共享
- vue-router：路由管理，实现页面跳转
- typeScript：编写代码

![](imgs/181_前端环境搭建_代码结构.jpg)

![](imgs/181_前端环境搭建_登录功能流程.jpg)

## 员工管理

- 员工列表查询

![](imgs/182_员工分页查询_需求分析和接口设计.jpg)

![](imgs/182_员工分页查询_需求分析和接口设计2.jpg)

![](imgs/183_员工分页查询_代码开发.jpg)

![](imgs/183_员工分页查询_代码开发2.jpg)

- 启用禁用员工账号

![](imgs/185_启用禁用员工账号_需求分析和接口设计.jpg)

![](imgs/185_启用禁用员工账号_需求分析和接口设计2.jpg)

- 新增员工

![](imgs/186_新增员工_需求分析和接口设计.jpg)

![](imgs/186_新增员工_需求分析和接口设计2.jpg)

![](imgs/187_新增员工_代码开发.jpg)

![](imgs/187_新增员工_代码开发2.jpg)

- 修改员工

![](imgs/188_修改员工_需求分析和接口设计.jpg)

![](imgs/188_修改员工_需求分析和接口设计2.jpg)

![](imgs/189_修改员工_代码开发.jpg)

![](imgs/189_修改员工_代码开发2.jpg)

![](imgs/189_修改员工_代码开发3.jpg)
