## 项目整体介绍

![](imgs/3_软件开发整体介绍.jpg)

![](imgs/3_软件开发整体介绍2.jpg)

![](imgs/4_项目模块.jpg)

![](imgs/4_技术选型.jpg)

![](imgs/5_整体架构.jpg)

![](imgs/6_后端架构.jpg)

![](imgs/6_模块介绍.jpg)

![](imgs/6_模块介绍2.jpg)

## 开发环境搭建

- 后端环境搭建

![](imgs/8_后端环境搭建_数据库.jpg)

![](imgs/9_后端环境搭建_前后端联调.jpg)

![](imgs/10_后端环境搭建_前段请求如何请求到后端.jpg)

![](imgs/10_后端环境搭建_nginx反向代理的好处.jpg)

![](imgs/11_后端环境搭建_nginx反向代理配置.jpg)

![](imgs/11_后端环境搭建_nginx负载均衡配置.jpg)

![](imgs/11_后端环境搭建_nginx负载均衡策略.jpg)

- 完善登陆功能

![](imgs/12_完善登陆功能_存在问题.jpg)

![](imgs/12_完善登陆功能_步骤.jpg)

## Swagger

![](imgs/14_Swagger介绍.jpg)

![](imgs/14_Swagger使用步骤.jpg)

1. 导入 knife4j 的maven坐标

```xml
<!--在pom.xml中添加依赖 -->
<dependency>
    <groupId>com.github.xiaoymin</groupId>
    <artifactId>knife4j-spring-boot-starter</artifactId>
</dependency>
```

2. 在配置类中加入 knife4j 相关配置

```java
// WebMvcConfiguration.java

/**
    * 通过knife4j生成接口文档
    * @return
*/
    @Bean
    public Docket docket() {
        ApiInfo apiInfo = new ApiInfoBuilder()
                .title("苍穹外卖项目接口文档")
                .version("2.0")
                .description("苍穹外卖项目接口文档")
                .build();
        Docket docket = new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(apiInfo)
                .select()
                .apis(RequestHandlerSelectors.basePackage("com.sky.controller"))
                .paths(PathSelectors.any())
                .build();
        return docket;
    }
```

3. 设置静态资源映射，否则接口文档页面无法访问

```java
// WebMvcConfiguration.java
/**
    * 设置静态资源映射
    * @param registry
*/
protected void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/doc.html").addResourceLocations("classpath:/META-INF/resources/");
        registry.addResourceHandler("/webjars/**").addResourceLocations("classpath:/META-INF/resources/webjars/");
}
```

![](imgs/14_Swagger和Yapi的区别.jpg)

![](imgs/15_Swagger常用注解.jpg)


## 员工管理、分类管理

- 新增员工

![](imgs/16_新增员工_需求分析和设计.jpg)

![](imgs/16_新增员工_需求分析和设计2.jpg)

![](imgs/16_新增员工_需求分析和设计3.jpg)

![](imgs/17_新增员工_代码开发.jpg)

![](imgs/18_新增员工_功能测试.jpg)

![](imgs/19_新增员工_代码完善.jpg)

![](imgs/20_新增员工_代码完善2.jpg)

![](imgs/20_新增员工_代码完善3.jpg)

![](imgs/20_新增员工_代码完善4.jpg)

![](imgs/20_新增员工_代码完善5.png)


- 员工分页查询

![](imgs/21_员工分页查询_需求分析和设计.jpg)

![](imgs/21_员工分页查询_需求分析和设计2.jpg)

![](imgs/22_员工分页查询_代码开发.jpg)

![](imgs/22_员工分页查询_代码开发2.jpg)

日期显示存在问题

![](imgs/24_员工分页查询_代码完善.jpg)

- 启用禁用员工账号

![](imgs/25_启用禁用员工账号_需求分析和设计.jpg)

![](imgs/25_启用禁用员工账号_需求分析和设计2.jpg)

- 编辑员工

![](imgs/27_编辑员工_需求分析和设计.jpg)

![](imgs/27_编辑员工_需求分析和设计2.jpg)

- 分类管理模块

基本同员工管理模块

![](imgs/30_分类管理模块_需求分析和设计.jpg)

![](imgs/30_分类管理模块_需求分析和设计2.jpg)

![](imgs/30_分类管理模块_需求分析和设计3.jpg)

![](imgs/30_分类管理模块_需求分析和设计4.jpg)

## 菜品管理

- 公共字段填充

![](imgs/31_公共字段填充_问题分析.jpg)

![](imgs/31_公共字段填充_实现思路.jpg)

- 新增菜品

![](imgs/35_新增菜品_需求分析和设计.jpg)

![](imgs/35_新增菜品_需求分析和设计2.jpg)

![](imgs/35_新增菜品_需求分析和设计3.jpg)

![](imgs/35_新增菜品_需求分析和设计4.jpg)

![](imgs/35_新增菜品_需求分析和设计5.jpg)

![](imgs/36_新增菜品_文件上传思路.jpg)

- 菜品分页查询

![](imgs/40_菜品分页查询_需求分析和设计.jpg)

![](imgs/40_菜品分页查询_需求分析和设计2.jpg)

![](imgs/41_菜品分页查询_代码开发.jpg)

![](imgs/41_菜品分页查询_代码开发2.jpg)

- 删除菜品

![](imgs/42_删除菜品_需求分析和设计.jpg)

![](imgs/42_删除菜品_需求分析和设计2.jpg)

![](imgs/42_删除菜品_需求分析和设计3.jpg)

- 修改菜品

![](imgs/45_修改菜品_需求分析和设计.jpg)

![](imgs/45_修改菜品_需求分析和设计2.jpg)

![](imgs/45_修改菜品_需求分析和设计3.jpg)

## 套餐管理

同菜品管理，包含新增套餐、套餐分页查询、删除套餐、修改套餐和起售停售套餐五大业务，自己实现

## 店铺营业状态设置

- Redis入门

![](imgs/50_redis入门.jpg)

![](imgs/50_redis入门2.jpg)

- Redis数据类型

![](imgs/51_redis常用数据类型.jpg)

![](imgs/51_redis常用数据类型特点.jpg)

- Redis常用命令

1. 字符串操作命令

![](imgs/52_redis常用命令_字符串操作命令.jpg)

2. 哈希操作命令

![](imgs/53_redis常用命令_哈希操作命令.jpg)

3. 列表操作命令

![](imgs/54_redis常用命令_列表操作命令.jpg)

4. 集合操作命令

![](imgs/55_redis常用命令_集合操作命令.jpg)

5. 有序集合操作命令

![](imgs/56_redis常用命令_有序集合操作命令.jpg)

6. 通用命令

![](imgs/57_redis常用命令_通用命令.jpg)

- 在Java中操作Redis

![](imgs/58_在Java中操作redis_常用客户端.jpg)

![](imgs/58_在Java中操作redis_Spring%20Data%20Redis使用方式.jpg)

- 店铺营业状态设置

![](imgs/63_店铺营业状态设置_需求分析和设计.jpg)

![](imgs/63_店铺营业状态设置_需求分析和设计2.jpg)

![](imgs/63_店铺营业状态设置_需求分析和设计3.jpg)

![](imgs/63_店铺营业状态设置_需求分析和设计4.jpg)

## 微信登录、商品浏览

- Http Client

![](imgs/67_HttpClient_介绍.jpg)

```java
// 使用案例
public void testGET() throws Exception{
    //1.创建httpclient对象
    CloseableHttpClient httpClient = HttpClients.createDefault();
    
    //2.创建请求对象
    HttpGet httpGet = new HttpGet("http://localhost:8080/user/shop/status");

    //3.发送请求，接受响应结果
    CloseableHttpResponse response = httpClient.execute(httpGet);

    //4.获取服务端返回的状态码
    int statusCode = response.getStatusLine().getStatusCode();
    System.out.println("服务端返回的状态码为：" + statusCode);

    HttpEntity entity = response.getEntity();
    String body = EntityUtils.toString(entity);
    System.out.println("服务端返回的数据为：" + body);

    //5.关闭资源
    response.close();
    httpClient.close();
}

public void testPOST() throws Exception{
    //1.创建httpclient对象
    CloseableHttpClient httpClient = HttpClients.createDefault();

    //2.创建请求对象
    HttpPost httpPost = new HttpPost("http://localhost:8080/admin/employee/login");
    //2.1设置请求体
    JSONObject jsonObject = new JSONObject();
    jsonObject.put("username","admin");
    jsonObject.put("password","123456");

    StringEntity entity = new StringEntity(jsonObject.toString());
    //2.2指定请求编码方式
    entity.setContentEncoding("utf-8");
    //2.3数据格式
    entity.setContentType("application/json");
    httpPost.setEntity(entity);

    //3.发送请求
    CloseableHttpResponse response = httpClient.execute(httpPost);

    //4.解析返回结果
    int statusCode = response.getStatusLine().getStatusCode();
    System.out.println("响应码为：" + statusCode);
    HttpEntity entity1 = response.getEntity();
    String body = EntityUtils.toString(entity1);
    System.out.println("响应数据为：" + body);

    //5.关闭资源
    response.close();
    httpClient.close();
}
```

- 微信小程序开发

![](imgs/70_微信小程序开发_介绍.jpg)

![](imgs/72_微信小程序开发_入门案例_目录结构.jpg)

![](imgs/72_微信小程序开发_入门案例_目录结构2.jpg)

- 微信登录

![](imgs/78_微信登录流程.jpg)

[微信登录官方说明文档](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html)

**步骤分析：**

1. 小程序端，调用wx.login()获取code，就是授权码。
2. 小程序端，调用wx.request()发送请求并携带code，请求开发者服务器(自己编写的后端服务)。
3. 开发者服务端，通过HttpClient向微信接口服务发送请求，并携带appId+appsecret+code三个参数。
4. 开发者服务端，接收微信接口服务返回的数据，session_key+opendId等。opendId是微信用户的唯一标识。
5. 开发者服务端，自定义登录态，生成令牌(token)和openid等数据返回给小程序端，方便后绪请求身份校验。
6. 小程序端，收到自定义登录态，存储storage。
7. 小程序端，后绪通过wx.request()发起业务请求时，携带token。
8. 开发者服务端，收到请求后，通过携带的token，解析当前登录用户的id。
9. 开发者服务端，身份校验通过后，继续相关的业务逻辑处理，最终返回业务数据。

![](imgs/79_微信登录_需求分析和设计.jpg)

![](imgs/79_微信登录_需求分析和设计2.jpg)

![](imgs/79_微信登录_需求分析和设计3.jpg)

- 导入商品浏览功能代码

![](imgs/84_商品浏览功能_需求分析和设计.jpg)

![](imgs/84_商品浏览功能_需求分析和设计2.jpg)

![](imgs/84_商品浏览功能_需求分析和设计3.jpg)

![](imgs/84_商品浏览功能_需求分析和设计4.jpg)

![](imgs/84_商品浏览功能_需求分析和设计5.jpg)

![](imgs/84_商品浏览功能_需求分析和设计6.jpg)

## 缓存和购物车

- 缓存菜品

![](imgs/87_缓存菜品_问题说明.jpg)

![](imgs/87_缓存菜品_实现思路.jpg)

![](imgs/87_缓存菜品_实现思路2.jpg)

![](imgs/89_缓存菜品_清理缓存数据.jpg)

- 缓存套餐

使用Spring Cache缓存框架来简化操作

![](imgs/91_缓存套餐_SpringCache介绍.jpg)

![](imgs/91_缓存套餐_SpringCache常用注解.jpg)




- 添加购物车

- 查看购物车

- 清空购物车
